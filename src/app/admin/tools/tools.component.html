<div class="margin-30 container-create ">
    
    <h2><strong>Materiais</strong></h2>
    <img class="profile-photo-create" src="{{ dataSelectedImageCreate || '../../../../assets/img/vitrine-barraca-default.jpg' }}" />


    <form [formGroup]="FormUnitCreate">
        
        <div class="margin-top-bottom-20">
            <input type="file" class="input-mage" (change)="onFileSelectedCreate($event)" formControlName="image"/>
        </div>
          
        <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Nome</mat-label>
            <input matInput formControlName="name">
        </mat-form-field>

        <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Quantidade</mat-label>
            <input matInput formControlName="quantity" type="number">
        </mat-form-field>

        <button color="primary" mat-raised-button class="button-width" (click)="create()">Adicionar</button>
    </form>
</div>



<mat-accordion class="margin-bottom">
    <mat-expansion-panel *ngFor="let cardData of cardsData" (opened)="onPanelOpened(cardData)" 
    (closed)="onPanelClosed()" hideToggle>
        <mat-expansion-panel-header (click)="action(cardData.id)">
            <mat-panel-title class="gap-10">
                <img class="profile-photo" src="{{ cardData.image || '../../../../assets/img/vitrine-barraca-default.jpg' }}" />
                
                <ng-container *ngIf="cardData.name.length <= 12; else longName">
                    {{ cardData.name }}
                </ng-container>
                
                <ng-template #longName>
                    {{ cardData.name | slice:0:12 }}...
                </ng-template>
            </mat-panel-title>
            
            <p class="quantity"> Qtn. {{cardData.quantity}}</p>
            <span class="material-icons margin-top-7">edit</span>
          
        </mat-expansion-panel-header>
        
        
        <img class="logo" src="{{ dataSelectedImage || '../../../../assets/img/vitrine-barraca-default.jpg' }}" />

        <form [formGroup]="FormUnit">
        
            <div class="margin-top-bottom-20">
                <input type="file" class="input" (change)="onFileSelected($event)" formControlName="image"/>
            </div>
              
            <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Nome</mat-label>
                <input matInput formControlName="name">
            </mat-form-field>

            <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Quantidade</mat-label>
                <input matInput formControlName="quantity" type="number">
            </mat-form-field>

            <div class="d-flex gap-10">
                <button mat-raised-button color="primary" class="button-width" (click)="save(cardData.id)"> Enviar</button>
                <button mat-raised-button class="button-width" (click)="delete(cardData.id)"> Deletar <mat-icon>delete</mat-icon></button>
            </div>
        </form>
    </mat-expansion-panel>
</mat-accordion>
